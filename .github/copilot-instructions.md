# Copilot instructions for bigtalkapp ðŸš€

Quick, actionable guidance to help an AI coding agent be productive in this repo.

## TL;DR - how to run and deploy
- Install: `npm install` (project uses Vite + React)
- Dev: `npm run dev` (runs `vite --host`, good for testing on device)
- Build: `npm run build` (produces `dist/`)
- Preview production build: `npm run preview` (uses `vite preview`)
- Lint: `npm run lint` (ESLint)
- Deploy to GitHub Pages: `npm run deploy` (uses `gh-pages -d dist`, there is a `predeploy` that runs build)

Tip: icons are generated by `node convert-svg.js` (requires `sharp`). The PWA manifest expects icons in `public/icons/`.

---

## Big picture
- Single-page React app (React 19) built with **Vite** and configured as a **PWA** (`vite-plugin-pwa`).
- Main entry: `src/main.jsx` â†’ `src/App.jsx`.
- Small stateful app that keeps its data in browser **localStorage** (no backend/services).
- Localisation is provided by `src/locale/LocaleContext.jsx` with per-language JSON files in `src/locales/`.
- Design decisions reflected in code:
  - App is mobile-first: orientation lock attempts, an install prompt, and small-screen heuristics.
  - User-added questions are stored locally (no sync).

---

## Key files & components (where to look first)
- `src/App.jsx` â€” core app logic: question selection, localStorage schema, legacy mapping for categories.
- `src/data/defaultQuestions.js` â€” canonical question list and category keys.
- `src/locale/LocaleContext.jsx`, `src/locales/*.json` â€” i18n lookups via `t('...')`.
- `src/components/*` â€” UI primitives (AddQuestion, Settings, FooterNav, InstallPrompt).
- `vite.config.js` â€” base path (`/bigtalkapp/` for GH Pages), PWA config (manifest + caching).
- `convert-svg.js` â€” helper to generate PWA icons (`public/icons/*`).
- `package.json` â€” scripts (dev/build/preview/deploy/lint) and dependencies.

---

## Important patterns & conventions (concrete, repo-specific)
- localStorage keys and types (used throughout `App.jsx`):
  - `questions` â€” array of question objects (either translated object or plain string for user entries)
  - `enabledCategories` â€” array of category keys (strings)
  - `seenQuestionIds` â€” array of IDs (to avoid repeats)
  - `language` â€” saved language code

- Question shape â€” two forms:
  - Built-in (translated): `{ id: 'd_001', question: { sv: '...', en: '...' }, category: 'self_insight' }`
  - User-added: `{ id: '...', question: 'plain text', category: 'ownQuestions' }`

- Category keys used in code: `self_insight`, `values`, `interests`, `social`, `ownQuestions`.
  - App maps some legacy Swedish labels to these keys using `CATEGORY_LEGACY_MAP` in `App.jsx` â€” update this map when migrating old stored data or renaming categories.

- i18n lookup is by dotted keys (example: `t('categories.self_insight')`). Add new categories to both `src/locales/en.json` and `src/locales/sv.json`.

- IDs: created with `generateId()` from `src/utils/generateId.js` (uses `crypto.randomUUID()` with a fallback).

- UI styling uses CSS Modules (e.g., `App.module.css` / `FooterNav.module.css`). Keep class names local to components for predictable styling.

- Performance: small optimizations exist (e.g., memoized `QuestionListItem` in `AddQuestion.jsx`) â€” preserve these where relevant.

---

## Editing / feature tips (practical examples)
- Adding a new default question:
  1. Add to `src/data/defaultQuestions.js` with an `id` like `d_XXX` and a `question` object with `sv` and `en` strings.
  2. If it introduces a new category, add translations under `categories` in both `src/locales/en.json` and `src/locales/sv.json`.

- Changing the app base or deploying to a different path: update `base` in `vite.config.js`, then run `npm run build` and `npm run deploy`.

- Regenerating icons: run `node convert-svg.js` (installs/uses `sharp`) and confirm `public/icons/icon-192.png` etc. are present.

- Verifying PWA/manifest: check `vite.config.js` manifest `start_url` and icons. Preview the production build locally (`npm run build` â†’ `npm run preview`) to validate service worker and asset caching.

---

## CI / tests / quality
- There are **no automated tests or CI** configured in this repo at the moment. The repository uses ESLint (`npm run lint`) for style and simple static checks.
- PR checklist for contributors: run `npm run lint`, `npm run build` and `npm run preview`, verify i18n strings updated, and regenerate icons if assets changed.

---

If anything in this file is unclear or you want additional sections (e.g., a short debugging checklist, recommended tests to add, or an explanation of the PWA cache strategy), tell me which part to expand and I will update it. âœ…
